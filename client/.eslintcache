[{"/Users/jordanclemons/Documents/preferify/client/src/index.js":"1","/Users/jordanclemons/Documents/preferify/client/src/reportWebVitals.js":"2","/Users/jordanclemons/Documents/preferify/client/src/App.js":"3","/Users/jordanclemons/Documents/preferify/client/src/components/container.js":"4","/Users/jordanclemons/Documents/preferify/client/src/components/welcomepage/welcomepage.js":"5","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/musicpage.js":"6","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/playlistbubble.js":"7","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/song.js":"8","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/songdetail.js":"9"},{"size":500,"mtime":1611797115790,"results":"10","hashOfConfig":"11"},{"size":362,"mtime":1611797115790,"results":"12","hashOfConfig":"11"},{"size":224,"mtime":1611797115772,"results":"13","hashOfConfig":"11"},{"size":485,"mtime":1611812817667,"results":"14","hashOfConfig":"11"},{"size":2892,"mtime":1611822367410,"results":"15","hashOfConfig":"11"},{"size":7608,"mtime":1611814299735,"results":"16","hashOfConfig":"11"},{"size":2118,"mtime":1611813381436,"results":"17","hashOfConfig":"11"},{"size":623,"mtime":1611813419533,"results":"18","hashOfConfig":"11"},{"size":837,"mtime":1611813460658,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"d5zfsc",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"/Users/jordanclemons/Documents/preferify/client/src/index.js",[],["41","42"],"/Users/jordanclemons/Documents/preferify/client/src/reportWebVitals.js",[],"/Users/jordanclemons/Documents/preferify/client/src/App.js",[],"/Users/jordanclemons/Documents/preferify/client/src/components/container.js",[],"/Users/jordanclemons/Documents/preferify/client/src/components/welcomepage/welcomepage.js",["43"],"/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/musicpage.js",["44","45","46","47","48","49","50","51"],"import React, { useEffect, useRef, useState } from 'react';\nimport queryString from 'query-string';\nimport {BrowserRouter as Redirect} from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCircleNotch, faCompactDisc} from '@fortawesome/free-solid-svg-icons'\nimport Typed from 'react-typed';\nimport Song from './song.js';\nimport SongDetail from './songdetail.js';\nimport PlaylistBubble from './playlistbubble.js';\nimport git from '../images/github-logo.png';\nimport './musicpage.css';\n\n\n\nfunction MusicPage() {\n\n  var token = queryString.parse(window.location.search).access_token;\n  const [songs, setSongs] = useState([]);\n  const [time, setTime] = useState(\"short_term\");\n  const [limit, setLimit] = useState();\n  const [load, setLoad] = useState(false);\n  const [modal, setModal] = useState(false);\n  const [selectedSong, setSelectedSong] = useState();\n  const [playlistModal, setPlaylistModal] = useState(false);\n  const [playlistname, setPlaylistname] = useState(\"\");\n  const [songURI, setSongURI] = useState([]);\n  const [playlistURL, setPlaylistURL] = useState(\"\");\n  const [finishplaylist, setFinishplaylist] = useState(false);\n  const [playlistImages, setPlaylistImages] = useState([]);\n\n  const [shortTerm, setShortTerm] = useState([]);\n  const [mediumTerm, setMediumTerm] = useState([]);\n  const [longTerm, setLongTerm] = useState([]);\n\n  const node = useRef();\n  const node2 = useRef();\n\n\n  const getSongs = () =>{\n    setLoad(true);\n    fetch('https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=50',{\n    headers: {'Authorization': 'Bearer ' + token}\n    }).then(response => response.json())\n    .then(data => setShortTerm(data.items))\n    fetch('https://api.spotify.com/v1/me/top/tracks?time_range=medium_term&limit=50',{\n    headers: {'Authorization': 'Bearer ' + token}\n    }).then(response => response.json())\n    .then(data => setMediumTerm(data.items))\n    fetch('https://api.spotify.com/v1/me/top/tracks?time_range=long_term&limit=50',{\n    headers: {'Authorization': 'Bearer ' + token}\n    }).then(response => response.json())\n    .then(data => setLongTerm(data.items))\n    setTimeout(() => setLoad(false), 500);\n}\n\nconst savePlaylist = (playlistName) =>{\n  fetch('https://api.spotify.com/v1/me',{\n    headers: {'Authorization': 'Bearer ' + token}\n  }).then(response => response.json())\n  .then((data) => {\n    var userID = data.id;\n    fetch(`https://api.spotify.com/v1/users/${userID}/playlists`, {\n      method: 'POST',\n      headers: {'Authorization': 'Bearer ' + token},\n      body: JSON.stringify({name: playlistName})\n    }).then(response => response.json())\n    .then((data) => {\n      setPlaylistURL(data.external_urls.spotify);\n      var playlistID = data.id;\n      fetch(`https://api.spotify.com/v1/users/${userID}/playlists/${playlistID}/tracks`, {\n        method: 'POST', \n        headers: {'Authorization': 'Bearer ' + token},\n        body: JSON.stringify({uris: songURI})\n      }).then((setFinishplaylist(true)))\n    })\n  })\n}\n\n/* Functions */\n\nconst handleLimit = e =>{\n  setLimit(e.target.value);\n}\n\nconst handleTerm = e =>{\n  setTime(e.target.value);\n}\n\nconst modalOn = (song) => {\n  setModal(!modal);\n  setSelectedSong(song);\n}\n\nconst playlistModalOn = () =>{\n  setPlaylistModal(!playlistModal);\n}\n\nconst closeModal = e => {\n  if (node.current.contains(e.target) || node2.current.contains(e.target)){\n    // inside click\n    return;\n  }\n  // outside click\n  setModal(false);\n  setSelectedSong();\n  setPlaylistModal(false);\n  setPlaylistname(\"\");\n  setPlaylistURL(\"\");\n  setFinishplaylist(false);\n};\n\n/* UseEffect renders */\n\n  useEffect(() =>{\n    getSongs();\n    console.log(\"test\");\n  }, []);\n\n  useEffect(() =>{\n    if(shortTerm !== undefined){\n      if(shortTerm.length > 0 && shortTerm !== undefined){\n        setSongs(shortTerm);\n        setLimit(10);\n      }\n    }\n  }, [shortTerm]);\n\n  useEffect(() =>{\n    if(time === \"short_term\"){\n      var newSongs =shortTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n    else if(time === \"medium_term\"){\n      var newSongs = mediumTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n    else if(time === \"long_term\"){\n      var newSongs = longTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n  }, [limit]);\n\n  useEffect(() =>{\n    if(time === \"short_term\"){\n      var newSongs =shortTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n    else if(time === \"medium_term\"){\n      var newSongs =mediumTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n    else if(time === \"long_term\"){\n      var newSongs = longTerm.slice(0, limit);\n      setSongs(newSongs);\n    }\n  }, [time]);\n\n  useEffect(() => {\n      setSongURI(songs.map(song => song.uri))\n      /* Generating playlist image */\n      if(songs.length > 0){\n        var images = [];\n        for(var x = 0; x < 4; x++){\n          images.push(songs[x].album.images[0].url);\n        }\n        setPlaylistImages(images);\n      }\n  }, [songs]);\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", closeModal);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", closeModal);\n    };\n  }, []);\n\n  /* Returns */\n\n  if(token == null){\n    return(\n      <Redirect to=\"/\"></Redirect>  //If not logged in go back to login\n    )\n  }\n\n  if(shortTerm === undefined){\n    return(\n      <Redirect to=\"/\"></Redirect>  //If not logged in go back to login\n    )\n  }\n\n  return (\n    <div>\n      <div className=\"music-container\">\n        <div className =\"music-input-container\">\n          <h1 className=\"music-top-header\">Your top songs</h1>\n          <div className=\"select-container\">\n            <select className=\"dropdown\" onChange={handleLimit}>\n              <option value=\"10\">10 songs</option>\n              <option value=\"25\">25 songs</option>\n              <option value=\"50\">50 songs</option>\n            </select>\n            <select className=\"dropdown\" onChange={handleTerm}>\n              <option value=\"short_term\">1 month</option>\n              <option value=\"medium_term\">6 months</option>\n              <option value=\"long_term\">all time</option>\n            </select>\n          </div>\n          \n        </div>\n        <div className=\"songs-container\">\n          {songs.map((song) =>\n            <Song song={song} onClick={modalOn}></Song>\n          )}\n        </div>\n        <div className=\"git-info\">\n                <a className=\"git-creator\" href={\"mailto:devbyjordan@gmail.com\"}>Created by Jordan Clemons</a>\n        </div>\n        <div className='music-header'>\n            <Typed\n                    strings={['Preferify']}\n                    typeSpeed={40}\n                    />\n          </div>\n      </div>\n      <div className=\"playlist-button\"><div className=\"button-flex\" onClick={() => playlistModalOn()}><FontAwesomeIcon icon={faCompactDisc} size=\"3x\" className=\"playlist-icon\"/> <div className=\"playlist-button-text\">Playlist</div></div></div>\n      <div className={`modal-background modalvisible-${modal}`}>\n        <div ref={node}><SongDetail song={selectedSong} ></SongDetail></div>\n      </div>\n      <div className={`visible-${load}`}><div className=\"spinner\"><FontAwesomeIcon icon={faCircleNotch} class=\"fa-spin\"/>Loading</div></div>\n      <div className={`modal-background modalvisible-${playlistModal}`}>\n        <div ref={node2}><PlaylistBubble limit={limit} time={time} savePlaylist={savePlaylist} playlistname={playlistname} setPlaylistname={setPlaylistname} finishPlaylist={finishplaylist} playlistURL={playlistURL} playlistImages={playlistImages}></PlaylistBubble></div>\n      </div>\n    </div>\n  );\n}\n\nexport default MusicPage;","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/playlistbubble.js",["52"],"import React, {useState, useEffect} from 'react';\nimport './playlistbubble.css';\n\nfunction PlaylistBubble({limit, time, savePlaylist, playlistname, setPlaylistname, finishPlaylist, playlistURL, playlistImages}) {\n\n    const [timespan, setTimespan] = useState();\n    const [submitPlaylistName, setSubmitPlaylistName] = useState(\"\");\n\n    const changePlaylistName = e =>{\n        if(e.target.value.length <= 200){\n            setPlaylistname(e.target.value);\n        }\n    }\n\n    const checkPlaylistName = () =>{\n        if(playlistname === \"\"){\n            setSubmitPlaylistName(\"Preferify top songs \" + timespan);\n        }\n        else{setSubmitPlaylistName(playlistname);}\n    }\n\n\n    useEffect(() =>{\n        if(time === \"short_term\"){\n            setTimespan(\"of the month\")\n        }\n        else if(time ===\"medium_term\"){\n            setTimespan(\"of 6 months\");\n        }\n        else if(time === \"long_term\"){\n            setTimespan(\"of all time\");\n        }\n      }, [time]);\n\n    useEffect(() =>{\n        if(submitPlaylistName.length > 0){\n            savePlaylist(submitPlaylistName);\n        }\n    }, [submitPlaylistName]);\n\n  return (\n    <div className=\"playlistbubble-container\">\n        <div className={`playlist-flexbox-${finishPlaylist}`}>\n            <p1 className=\"playlist-title\">Playlist Title</p1>\n            <input className=\"playlist-input\" type=\"text\" placeholder={`Preferify top songs ${timespan}`} onChange={e => changePlaylistName(e)} value={playlistname}></input>\n            <button className=\"playlistbubble-button\" onClick={() => checkPlaylistName()}>Make Playlist</button>\n        </div>\n        <div className={`playlistdone-flexbox-${finishPlaylist}`}>\n            <p1>Playlist created!</p1>\n            <div className=\"images-flex\">\n            {playlistImages.map((image) =>\n                <img className=\"playlist-image\" src={image} alt=\"playlist thumbnail\"></img>\n            )}\n            </div>\n            <a href={playlistURL} target=\"_blank\" className=\"playlist-link\" rel=\"noreferrer\">Open in Spotify</a>\n        </div>\n    </div>\n  );\n}\n\nexport default PlaylistBubble;","/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/song.js",[],"/Users/jordanclemons/Documents/preferify/client/src/components/musicpage/songdetail.js",[],{"ruleId":"53","replacedBy":"54"},{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","severity":1,"message":"58","line":16,"column":11,"nodeType":"59","messageId":"60","endLine":16,"endColumn":24},{"ruleId":"57","severity":1,"message":"61","line":10,"column":8,"nodeType":"59","messageId":"60","endLine":10,"endColumn":11},{"ruleId":"62","severity":1,"message":"63","line":117,"column":6,"nodeType":"64","endLine":117,"endColumn":8,"suggestions":"65"},{"ruleId":"66","severity":1,"message":"67","line":134,"column":11,"nodeType":"59","messageId":"68","endLine":134,"endColumn":19},{"ruleId":"66","severity":1,"message":"67","line":138,"column":11,"nodeType":"59","messageId":"68","endLine":138,"endColumn":19},{"ruleId":"62","severity":1,"message":"69","line":141,"column":6,"nodeType":"64","endLine":141,"endColumn":13,"suggestions":"70"},{"ruleId":"66","severity":1,"message":"67","line":149,"column":11,"nodeType":"59","messageId":"68","endLine":149,"endColumn":19},{"ruleId":"66","severity":1,"message":"67","line":153,"column":11,"nodeType":"59","messageId":"68","endLine":153,"endColumn":19},{"ruleId":"62","severity":1,"message":"71","line":156,"column":6,"nodeType":"64","endLine":156,"endColumn":12,"suggestions":"72"},{"ruleId":"62","severity":1,"message":"73","line":39,"column":8,"nodeType":"64","endLine":39,"endColumn":28,"suggestions":"74"},"no-native-reassign",["75"],"no-negated-in-lhs",["76"],"no-unused-vars","'DEVOPMENTLINK' is assigned a value but never used.","Identifier","unusedVar","'git' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getSongs'. Either include it or remove the dependency array.","ArrayExpression",["77"],"no-redeclare","'newSongs' is already defined.","redeclared","React Hook useEffect has missing dependencies: 'longTerm', 'mediumTerm', 'shortTerm', and 'time'. Either include them or remove the dependency array.",["78"],"React Hook useEffect has missing dependencies: 'limit', 'longTerm', 'mediumTerm', and 'shortTerm'. Either include them or remove the dependency array.",["79"],"React Hook useEffect has a missing dependency: 'savePlaylist'. Either include it or remove the dependency array. If 'savePlaylist' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["80"],"no-global-assign","no-unsafe-negation",{"desc":"81","fix":"82"},{"desc":"83","fix":"84"},{"desc":"83","fix":"85"},{"desc":"86","fix":"87"},"Update the dependencies array to be: [getSongs]",{"range":"88","text":"89"},"Update the dependencies array to be: [limit, longTerm, mediumTerm, shortTerm, time]",{"range":"90","text":"91"},{"range":"92","text":"91"},"Update the dependencies array to be: [savePlaylist, submitPlaylistName]",{"range":"93","text":"94"},[3694,3696],"[getSongs]",[4262,4269],"[limit, longTerm, mediumTerm, shortTerm, time]",[4638,4644],[1114,1134],"[savePlaylist, submitPlaylistName]"]